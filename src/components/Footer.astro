---
const isRoot = Astro.url.pathname === "/";
const emailUser = "desk";
const emailDomain = "syrkis.com";
---

{
    !isRoot && (
        <footer class="footer" transition:name="footer">
            <div class="content">
                ———————
                <br />
                for any inquiries, write
                <br />
                <a
                    href="#"
                    class="email-link"
                    data-user={emailUser}
                    data-domain={emailDomain}
                >
                    {emailUser}[at]{emailDomain}
                </a>
            </div>
        </footer>
    )
}

<style>
    .footer {
        text-align: center;
        padding: 5vh 0;
    }

    .content {
        line-height: 2.5;
    }

    a {
        color: inherit;
        text-decoration: none;
    }

    a:hover {
        text-decoration: underline;
    }
</style>

<script>
    function attachEmailHandler() {
        const emailLink = document.querySelector(".email-link");
        if (emailLink) {
            const user = emailLink.getAttribute("data-user");
            const domain = emailLink.getAttribute("data-domain");

            emailLink.addEventListener("click", (e) => {
                e.preventDefault();
                window.location.href = `mailto:${user}@${domain}`;
            });
        }
    }

    // Initial load
    attachEmailHandler();

    // Handle view transitions
    document.addEventListener("astro:page-load", attachEmailHandler);
</script>
